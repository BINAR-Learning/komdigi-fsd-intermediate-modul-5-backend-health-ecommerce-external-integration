{
	"info": {
		"_postman_id": "health-ecommerce-api-v1",
		"name": "Health E-Commerce API - Complete Collection",
		"description": "Complete API collection untuk Health E-Commerce dengan Authentication, Products, AI Chatbot, Kemenkes Integration, Midtrans Payment Gateway, dan Cloudinary Image Upload",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "health-ecommerce"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set(\"authToken\", jsonData.token);",
									"        pm.environment.set(\"userId\", jsonData.user.id);",
									"        pm.environment.set(\"userEmail\", jsonData.user.email);",
									"        pm.environment.set(\"userRole\", jsonData.user.role);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Aiman\",\n  \"email\": \"aiman@example.com\",\n  \"password\": \"Aiman123!\",\n  \"role\": \"user\",\n  \"phone\": \"081234567890\",\n  \"address\": \"Jl. Merdeka No. 123, Jakarta\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "Register user baru. Token JWT akan otomatis disimpan di environment variable `authToken` setelah register berhasil."
					},
					"response": []
				},
				{
					"name": "Register Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set(\"adminToken\", jsonData.token);",
									"        pm.environment.set(\"adminId\", jsonData.user.id);",
									"        pm.environment.set(\"adminEmail\", jsonData.user.email);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Admin User\",\n  \"email\": \"admin@example.com\",\n  \"password\": \"Admin123!\",\n  \"role\": \"admin\",\n  \"phone\": \"081987654321\",\n  \"address\": \"Jl. Admin No. 1, Jakarta\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "Register user dengan role admin. Token akan disimpan di `adminToken`."
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set(\"authToken\", jsonData.token);",
									"        pm.environment.set(\"userId\", jsonData.user.id);",
									"        pm.environment.set(\"userEmail\", jsonData.user.email);",
									"        pm.environment.set(\"userRole\", jsonData.user.role);",
									"        ",
									"        if (jsonData.user.role === 'admin') {",
									"            pm.environment.set(\"adminToken\", jsonData.token);",
									"        }",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{userEmail}}\",\n  \"password\": \"Password123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login user dan dapatkan JWT token. Token akan otomatis disimpan di environment variable."
					},
					"response": []
				},
				{
					"name": "Get Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"profile"
							]
						},
						"description": "Get profil user yang sedang login. Memerlukan JWT token (Bearer Token)."
					},
					"response": []
				},
				{
					"name": "Update Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Aiman Rahman",
									"type": "text"
								},
								{
									"key": "phone",
									"value": "081234567890",
									"type": "text"
								},
								{
									"key": "address",
									"value": "Jl. Merdeka No. 123, Jakarta",
									"type": "text"
								},
								{
									"key": "password",
									"value": "NewPassword123!",
									"type": "text",
									"description": "New password (optional). Will be hashed automatically."
								},
								{
									"key": "image",
									"type": "file",
									"src": [],
									"description": "Profile photo (JPG, PNG, WEBP). Max 2MB. Optional. Will be auto-cropped to 400x400px with face detection. Old photo will be deleted if new one is uploaded."
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"profile"
							]
						},
						"description": "Update profil user dengan optional image upload. Memerlukan JWT token (Bearer Token).\n\n**All fields are optional (partial update):**\n- name: Update nama\n- phone: Update nomor telepon\n- address: Update alamat\n- password: Update password (akan di-hash otomatis)\n- image: Upload profile photo\n\n**Note:** Jika upload image baru, old photo akan otomatis dihapus dari Cloudinary."
					},
					"response": []
				}
			],
			"description": "Endpoints untuk authentication dan authorization"
		},
		{
			"name": "Products",
			"item": [
				{
					"name": "Get All Products",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/products?category=Vitamin&minPrice=0&maxPrice=100000&search=vitamin",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products"
							],
							"query": [
								{
									"key": "category",
									"value": "Vitamin",
									"description": "Filter by category: Vitamin, Supplement, Medical Equipment, Medicine, Other",
									"disabled": true
								},
								{
									"key": "minPrice",
									"value": "0",
									"description": "Minimum price filter",
									"disabled": true
								},
								{
									"key": "maxPrice",
									"value": "100000",
									"description": "Maximum price filter",
									"disabled": true
								},
								{
									"key": "search",
									"value": "vitamin",
									"description": "Search by product name or description",
									"disabled": true
								}
							]
						},
						"description": "Get semua produk dengan optional filtering. Tidak memerlukan authentication."
					},
					"response": []
				},
				{
					"name": "Get Product by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/products/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "69058b83cc8332efdabe01e2",
									"description": "Product ID"
								}
							]
						},
						"description": "Get produk berdasarkan ID. Tidak memerlukan authentication."
					},
					"response": []
				},
				{
					"name": "Create Product (Admin Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{adminToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Vitamin C 1000mg",
									"type": "text"
								},
								{
									"key": "category",
									"value": "Vitamin",
									"type": "text"
								},
								{
									"key": "price",
									"value": "85000",
									"type": "text"
								},
								{
									"key": "stock",
									"value": "50",
									"type": "text"
								},
								{
									"key": "description",
									"value": "Suplemen vitamin C untuk meningkatkan daya tahan tubuh",
									"type": "text"
								},
								{
									"key": "manufacturer",
									"value": "PT Sehat Sejahtera",
									"type": "text"
								},
								{
									"key": "isActive",
									"value": "true",
									"type": "text"
								},
								{
									"key": "image",
									"type": "file",
									"src": [],
									"description": "Product image (JPG, PNG, WEBP). Max 5MB. Optional. Will be auto-resized to 800x800px."
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/products",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products"
							]
						},
						"description": "Create produk baru dengan optional image upload. **Hanya Admin** yang bisa membuat produk. Memerlukan Bearer Token dengan role admin.\n\n**Required fields:** name, category, price, stock\n\n**Optional fields:** description, manufacturer, isActive, image\n\n**Category options:** Vitamin, Supplement, Medical Equipment, Medicine, Other\n\n**Image:** Upload product image (JPG, PNG, WEBP). Max 5MB. Will be auto-resized to 800x800px."
					},
					"response": []
				},
				{
					"name": "Update Product (Admin Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{adminToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Vitamin C 1000mg Updated",
									"type": "text"
								},
								{
									"key": "price",
									"value": "90000",
									"type": "text"
								},
								{
									"key": "stock",
									"value": "60",
									"type": "text"
								},
								{
									"key": "description",
									"value": "Updated description",
									"type": "text"
								},
								{
									"key": "image",
									"type": "file",
									"src": [],
									"description": "New product image (JPG, PNG, WEBP). Max 5MB. Optional. Old image will be deleted if new one is uploaded."
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/products/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "69058b83cc8332efdabe01e2",
									"description": "Product ID"
								}
							]
						},
						"description": "Update produk dengan optional image upload. **Hanya Admin** yang bisa update produk. Semua field optional (partial update).\n\n**Note:** Jika upload image baru, old image akan otomatis dihapus dari Cloudinary."
					},
					"response": []
				},
				{
					"name": "Delete Product (Admin Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{adminToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/products/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "69058b83cc8332efdabe01e2",
									"description": "Product ID"
								}
							]
						},
						"description": "Delete produk. **Hanya Admin** yang bisa menghapus produk."
					},
					"response": []
				}
			],
			"description": "Endpoints untuk product management"
		},
		{
			"name": "AI Chatbot",
			"item": [
				{
					"name": "Ask AI",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"question\": \"Vitamin apa yang bagus untuk imun tubuh?\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/external/ai/ask",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"external",
								"ai",
								"ask"
							]
						},
						"description": "Tanya AI chatbot untuk rekomendasi kesehatan. Rate limited: 10 requests per 15 minutes. Tidak memerlukan authentication.\n\n**Note:** Question maksimal 500 karakter."
					},
					"response": []
				}
			],
			"description": "AI chatbot untuk health recommendations"
		},
		{
			"name": "Kemenkes Integration",
			"item": [
				{
					"name": "Search Medications",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/external/kemenkes/medications?search=paracetamol&limit=10",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"external",
								"kemenkes",
								"medications"
							],
							"query": [
								{
									"key": "search",
									"value": "paracetamol",
									"description": "Search term for medication name",
									"disabled": true
								},
								{
									"key": "limit",
									"value": "10",
									"description": "Maximum number of results (default: 10)",
									"disabled": true
								}
							]
						},
						"description": "Search obat dari Kemenkes API. Memerlukan Bearer Token (bisa user atau admin)."
					},
					"response": []
				},
				{
					"name": "Sync Kemenkes to Database (Admin Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{adminToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/external/kemenkes/sync",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"external",
								"kemenkes",
								"sync"
							]
						},
						"description": "Sync data obat dari Kemenkes API ke database lokal. **Hanya Admin** yang bisa melakukan sync ini. Tidak memerlukan request body."
					},
					"response": []
				}
			],
			"description": "Kemenkes API integration endpoints"
		},
		{
			"name": "Payment (Midtrans)",
			"item": [
				{
					"name": "Create Payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"orderId\": \"ORDER-{{$timestamp}}\",\n  \"customerEmail\": \"{{userEmail}}\",\n  \"customerName\": \"Aiman\",\n  \"amount\": 170000,\n  \"items\": [\n    {\n      \"id\": \"69058b83cc8332efdabe01e2\",\n      \"name\": \"Vitamin C 1000mg\",\n      \"price\": 85000,\n      \"quantity\": 2\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/external/payment/create",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"external",
								"payment",
								"create"
							]
						},
						"description": "Create payment transaction via Midtrans. Memerlukan Bearer Token.\n\n**Required fields:**\n- orderId: Unique order identifier\n- customerEmail: Customer email\n- customerName: Customer name\n- amount: Total amount (harus sesuai dengan total items)\n- items: Array of items dengan id, name, price, quantity"
					},
					"response": []
				},
				{
					"name": "Payment Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"transaction_status\": \"settlement\",\n  \"order_id\": \"ORDER-1234567890\",\n  \"gross_amount\": \"170000\",\n  \"status_code\": \"200\",\n  \"signature_key\": \"abc123...\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/external/payment/webhook",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"external",
								"payment",
								"webhook"
							]
						},
						"description": "Webhook endpoint untuk Midtrans payment notifications. Dipanggil otomatis oleh Midtrans ketika status pembayaran berubah. Tidak memerlukan authentication."
					},
					"response": []
				}
			],
			"description": "Midtrans payment gateway integration"
		},
		{
			"name": "Image Upload (Cloudinary)",
			"item": [
				{
					"name": "Upload Product Image (Admin Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{adminToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "image",
									"type": "file",
									"src": [],
									"description": "Product image file (JPG, PNG, WEBP). Max 5MB. Will be auto-resized to 800x800px."
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/upload/product",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"upload",
								"product"
							]
						},
						"description": "Upload product image ke Cloudinary. **Hanya Admin** yang bisa upload product image.\n\n**File Requirements:**\n- Format: JPG, JPEG, PNG, WEBP\n- Max size: 5MB\n- Auto-resized to 800x800px\n- Stored in folder: `health-ecommerce/products`\n\n**Response includes:**\n- `imageUrl`: Cloudinary CDN URL\n- `publicId`: Untuk delete image nanti"
					},
					"response": []
				},
				{
					"name": "Upload Profile Photo",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "image",
									"type": "file",
									"src": [],
									"description": "Profile photo (JPG, PNG, WEBP). Max 2MB. Will be auto-cropped to 400x400px with face detection."
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/upload/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"upload",
								"profile"
							]
						},
						"description": "Upload profile photo ke Cloudinary. **Semua user** yang sudah login bisa upload profile photo.\n\n**File Requirements:**\n- Format: JPG, JPEG, PNG, WEBP\n- Max size: 2MB\n- Auto-cropped to 400x400px dengan face detection\n- Stored in folder: `health-ecommerce/profiles`\n- Old photo akan otomatis dihapus jika ada\n\n**Response includes:**\n- `imageUrl`: Cloudinary CDN URL\n- `user`: Updated user object dengan profilePhoto"
					},
					"response": []
				},
				{
					"name": "Delete Image",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/upload/:publicId",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"upload",
								":publicId"
							],
							"variable": [
								{
									"key": "publicId",
									"value": "health-ecommerce/products/abc123",
									"description": "Cloudinary public ID (dari response upload sebelumnya)"
								}
							]
						},
						"description": "Delete image dari Cloudinary menggunakan public ID.\n\n**Public ID format:**\n- Product: `health-ecommerce/products/abc123`\n- Profile: `health-ecommerce/profiles/xyz789`\n\n**Note:** Public ID bisa didapat dari response upload sebelumnya."
					},
					"response": []
				}
			],
			"description": "Cloudinary image upload endpoints untuk product images dan profile photos"
		},
		{
			"name": "Health Check",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/health",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Check API health status. Tidak memerlukan authentication."
					},
					"response": []
				}
			],
			"description": "Health check endpoint"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5000",
			"type": "string"
		},
		{
			"key": "authToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "adminToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		},
		{
			"key": "userEmail",
			"value": "aiman@example.com",
			"type": "string"
		},
		{
			"key": "userRole",
			"value": "",
			"type": "string"
		}
	]
}
